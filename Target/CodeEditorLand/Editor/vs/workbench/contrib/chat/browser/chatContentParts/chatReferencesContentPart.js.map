{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/Land/Dependency/Editor/Source/vs/workbench/contrib/chat/browser/chatContentParts/chatReferencesContentPart.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Button } from '../../../../../base/browser/ui/button/button.js';\nimport { IListRenderer, IListVirtualDelegate } from '../../../../../base/browser/ui/list/list.js';\nimport { IAction } from '../../../../../base/common/actions.js';\nimport { coalesce } from '../../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { Disposable, DisposableStore, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { matchesSomeScheme, Schemas } from '../../../../../base/common/network.js';\nimport { basename } from '../../../../../base/common/path.js';\nimport { basenameOrAuthority, isEqualAuthority } from '../../../../../base/common/resources.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { createAndFillInContextMenuActions } from '../../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { MenuWorkbenchToolBar } from '../../../../../platform/actions/browser/toolbar.js';\nimport { Action2, IMenuService, MenuId, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../../platform/contextview/browser/contextView.js';\nimport { FileKind } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../../platform/instantiation/common/serviceCollection.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { WorkbenchList } from '../../../../../platform/list/browser/listService.js';\nimport { IOpenerService } from '../../../../../platform/opener/common/opener.js';\nimport { IProductService } from '../../../../../platform/product/common/productService.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { fillEditorsDragData } from '../../../../browser/dnd.js';\nimport { IResourceLabel, ResourceLabels } from '../../../../browser/labels.js';\nimport { ColorScheme } from '../../../../browser/web.api.js';\nimport { ResourceContextKey } from '../../../../common/contextkeys.js';\nimport { SETTINGS_AUTHORITY } from '../../../../services/preferences/common/preferences.js';\nimport { createFileIconThemableTreeContainerScope } from '../../../files/browser/views/explorerView.js';\nimport { ExplorerFolderContext } from '../../../files/common/files.js';\nimport { chatEditingWidgetFileStateContextKey, WorkingSetEntryState } from '../../common/chatEditingService.js';\nimport { ChatResponseReferencePartStatusKind, IChatContentReference, IChatWarningMessage } from '../../common/chatService.js';\nimport { IChatVariablesService } from '../../common/chatVariables.js';\nimport { IChatRendererContent, IChatResponseViewModel } from '../../common/chatViewModel.js';\nimport { ChatTreeItem, IChatWidgetService } from '../chat.js';\nimport { IDisposableReference, ResourcePool } from './chatCollections.js';\nimport { IChatContentPart } from './chatContentParts.js';\n\nconst $ = dom.$;\n\nexport interface IChatReferenceListItem extends IChatContentReference {\n\ttitle?: string;\n\tstate?: WorkingSetEntryState;\n}\n\nexport type IChatCollapsibleListItem = IChatReferenceListItem | IChatWarningMessage;\n\nexport class ChatCollapsibleListContentPart extends Disposable implements IChatContentPart {\n\tpublic readonly domNode: HTMLElement;\n\n\tprivate readonly _onDidChangeHeight = this._register(new Emitter<void>());\n\tpublic readonly onDidChangeHeight = this._onDidChangeHeight.event;\n\n\tconstructor(\n\t\tprivate readonly data: ReadonlyArray<IChatCollapsibleListItem>,\n\t\tlabelOverride: string | undefined,\n\t\telement: IChatResponseViewModel,\n\t\tcontentReferencesListPool: CollapsibleListPool,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper();\n\n\t\tconst referencesLabel = labelOverride ?? (data.length > 1 ?\n\t\t\tlocalize('usedReferencesPlural', \"Used {0} references\", data.length) :\n\t\t\tlocalize('usedReferencesSingular', \"Used {0} reference\", 1));\n\t\tconst iconElement = $('.chat-used-context-icon');\n\t\tconst icon = (element: IChatResponseViewModel) => element.usedReferencesExpanded ? Codicon.chevronDown : Codicon.chevronRight;\n\t\ticonElement.classList.add(...ThemeIcon.asClassNameArray(icon(element)));\n\t\tconst buttonElement = $('.chat-used-context-label', undefined);\n\n\t\tconst collapseButton = this._register(new Button(buttonElement, {\n\t\t\tbuttonBackground: undefined,\n\t\t\tbuttonBorder: undefined,\n\t\t\tbuttonForeground: undefined,\n\t\t\tbuttonHoverBackground: undefined,\n\t\t\tbuttonSecondaryBackground: undefined,\n\t\t\tbuttonSecondaryForeground: undefined,\n\t\t\tbuttonSecondaryHoverBackground: undefined,\n\t\t\tbuttonSeparator: undefined\n\t\t}));\n\t\tthis.domNode = $('.chat-used-context', undefined, buttonElement);\n\t\tcollapseButton.label = referencesLabel;\n\t\tcollapseButton.element.prepend(iconElement);\n\t\tthis.updateAriaLabel(collapseButton.element, referencesLabel, element.usedReferencesExpanded);\n\t\tthis.domNode.classList.toggle('chat-used-context-collapsed', !element.usedReferencesExpanded);\n\t\tthis._register(collapseButton.onDidClick(() => {\n\t\t\ticonElement.classList.remove(...ThemeIcon.asClassNameArray(icon(element)));\n\t\t\telement.usedReferencesExpanded = !element.usedReferencesExpanded;\n\t\t\ticonElement.classList.add(...ThemeIcon.asClassNameArray(icon(element)));\n\t\t\tthis.domNode.classList.toggle('chat-used-context-collapsed', !element.usedReferencesExpanded);\n\t\t\tthis._onDidChangeHeight.fire();\n\t\t\tthis.updateAriaLabel(collapseButton.element, referencesLabel, element.usedReferencesExpanded);\n\t\t}));\n\n\t\tconst ref = this._register(contentReferencesListPool.get());\n\t\tconst list = ref.object;\n\t\tthis.domNode.appendChild(list.getHTMLElement().parentElement!);\n\n\t\tthis._register(list.onDidOpen((e) => {\n\t\t\tif (e.element && 'reference' in e.element && typeof e.element.reference === 'object') {\n\t\t\t\tconst uriOrLocation = 'variableName' in e.element.reference ? e.element.reference.value : e.element.reference;\n\t\t\t\tconst uri = URI.isUri(uriOrLocation) ? uriOrLocation :\n\t\t\t\t\turiOrLocation?.uri;\n\t\t\t\tif (uri) {\n\t\t\t\t\topenerService.open(\n\t\t\t\t\t\turi,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfromUserGesture: true,\n\t\t\t\t\t\t\teditorOptions: {\n\t\t\t\t\t\t\t\t...e.editorOptions,\n\t\t\t\t\t\t\t\t...{\n\t\t\t\t\t\t\t\t\tselection: uriOrLocation && 'range' in uriOrLocation ? uriOrLocation.range : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(list.onContextMenu(e => {\n\t\t\tdom.EventHelper.stop(e.browserEvent, true);\n\n\t\t\tconst uri = e.element && getResourceForElement(e.element);\n\t\t\tif (!uri) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tgetAnchor: () => e.anchor,\n\t\t\t\tgetActions: () => {\n\t\t\t\t\tconst menu = menuService.getMenuActions(MenuId.ChatAttachmentsContext, list.contextKeyService, { shouldForwardArgs: true, arg: uri });\n\t\t\t\t\tconst primary: IAction[] = [];\n\t\t\t\t\tcreateAndFillInContextMenuActions(menu, primary);\n\t\t\t\t\treturn primary;\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\tconst resourceContextKey = this._register(this.instantiationService.createInstance(ResourceContextKey));\n\t\tthis._register(list.onDidChangeFocus(e => {\n\t\t\tresourceContextKey.reset();\n\t\t\tconst element = e.elements.length ? e.elements[0] : undefined;\n\t\t\tconst uri = element && getResourceForElement(element);\n\t\t\tresourceContextKey.set(uri ?? null);\n\t\t}));\n\n\t\tconst maxItemsShown = 6;\n\t\tconst itemsShown = Math.min(data.length, maxItemsShown);\n\t\tconst height = itemsShown * 22;\n\t\tlist.layout(height);\n\t\tlist.getHTMLElement().style.height = `${height}px`;\n\t\tlist.splice(0, list.length, data);\n\t}\n\n\thasSameContent(other: IChatRendererContent, followingContent: IChatRendererContent[], element: ChatTreeItem): boolean {\n\t\treturn other.kind === 'references' && other.references.length === this.data.length ||\n\t\t\tother.kind === 'codeCitations' && other.citations.length === this.data.length;\n\t}\n\n\tprivate updateAriaLabel(element: HTMLElement, label: string, expanded?: boolean): void {\n\t\telement.ariaLabel = expanded ? localize('usedReferencesExpanded', \"{0}, expanded\", label) : localize('usedReferencesCollapsed', \"{0}, collapsed\", label);\n\t}\n\n\taddDisposable(disposable: IDisposable): void {\n\t\tthis._register(disposable);\n\t}\n}\n\nexport class CollapsibleListPool extends Disposable {\n\tprivate _pool: ResourcePool<WorkbenchList<IChatCollapsibleListItem>>;\n\n\tpublic get inUse(): ReadonlySet<WorkbenchList<IChatCollapsibleListItem>> {\n\t\treturn this._pool.inUse;\n\t}\n\n\tconstructor(\n\t\tprivate _onDidChangeVisibility: Event<boolean>,\n\t\tprivate readonly menuId: MenuId | undefined,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t) {\n\t\tsuper();\n\t\tthis._pool = this._register(new ResourcePool(() => this.listFactory()));\n\t}\n\n\tprivate listFactory(): WorkbenchList<IChatCollapsibleListItem> {\n\t\tconst resourceLabels = this._register(this.instantiationService.createInstance(ResourceLabels, { onDidChangeVisibility: this._onDidChangeVisibility }));\n\n\t\tconst container = $('.chat-used-context-list');\n\t\tthis._register(createFileIconThemableTreeContainerScope(container, this.themeService));\n\n\t\tconst list = this.instantiationService.createInstance(\n\t\t\tWorkbenchList<IChatCollapsibleListItem>,\n\t\t\t'ChatListRenderer',\n\t\t\tcontainer,\n\t\t\tnew CollapsibleListDelegate(),\n\t\t\t[this.instantiationService.createInstance(CollapsibleListRenderer, resourceLabels, this.menuId)],\n\t\t\t{\n\t\t\t\talwaysConsumeMouseWheel: false,\n\t\t\t\taccessibilityProvider: {\n\t\t\t\t\tgetAriaLabel: (element: IChatCollapsibleListItem) => {\n\t\t\t\t\t\tif (element.kind === 'warning') {\n\t\t\t\t\t\t\treturn element.content.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst reference = element.reference;\n\t\t\t\t\t\tif (typeof reference === 'string') {\n\t\t\t\t\t\t\treturn reference;\n\t\t\t\t\t\t} else if ('variableName' in reference) {\n\t\t\t\t\t\t\treturn reference.variableName;\n\t\t\t\t\t\t} else if (URI.isUri(reference)) {\n\t\t\t\t\t\t\treturn basename(reference.path);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn basename(reference.uri.path);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\tgetWidgetAriaLabel: () => localize('chatCollapsibleList', \"Collapsible Chat List\")\n\t\t\t\t},\n\t\t\t\tdnd: {\n\t\t\t\t\tgetDragURI: (element: IChatCollapsibleListItem) => getResourceForElement(element)?.toString() ?? null,\n\t\t\t\t\tgetDragLabel: (elements, originalEvent) => {\n\t\t\t\t\t\tconst uris: URI[] = coalesce(elements.map(getResourceForElement));\n\t\t\t\t\t\tif (!uris.length) {\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t} else if (uris.length === 1) {\n\t\t\t\t\t\t\treturn this.labelService.getUriLabel(uris[0], { relative: true });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn `${uris.length}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdispose: () => { },\n\t\t\t\t\tonDragOver: () => false,\n\t\t\t\t\tdrop: () => { },\n\t\t\t\t\tonDragStart: (data, originalEvent) => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst elements = data.getData() as IChatCollapsibleListItem[];\n\t\t\t\t\t\t\tconst uris: URI[] = coalesce(elements.map(getResourceForElement));\n\t\t\t\t\t\t\tthis.instantiationService.invokeFunction(accessor => fillEditorsDragData(accessor, uris, originalEvent));\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t// noop\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\treturn list;\n\t}\n\n\tget(): IDisposableReference<WorkbenchList<IChatCollapsibleListItem>> {\n\t\tconst object = this._pool.get();\n\t\tlet stale = false;\n\t\treturn {\n\t\t\tobject,\n\t\t\tisStale: () => stale,\n\t\t\tdispose: () => {\n\t\t\t\tstale = true;\n\t\t\t\tthis._pool.release(object);\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass CollapsibleListDelegate implements IListVirtualDelegate<IChatCollapsibleListItem> {\n\tgetHeight(element: IChatCollapsibleListItem): number {\n\t\treturn 22;\n\t}\n\n\tgetTemplateId(element: IChatCollapsibleListItem): string {\n\t\treturn CollapsibleListRenderer.TEMPLATE_ID;\n\t}\n}\n\ninterface ICollapsibleListTemplate {\n\treadonly contextKeyService?: IContextKeyService;\n\treadonly label: IResourceLabel;\n\treadonly templateDisposables: DisposableStore;\n\ttoolbar: MenuWorkbenchToolBar | undefined;\n\tactionBarContainer?: HTMLElement;\n}\n\nclass CollapsibleListRenderer implements IListRenderer<IChatCollapsibleListItem, ICollapsibleListTemplate> {\n\tstatic TEMPLATE_ID = 'chatCollapsibleListRenderer';\n\treadonly templateId: string = CollapsibleListRenderer.TEMPLATE_ID;\n\n\tconstructor(\n\t\tprivate labels: ResourceLabels,\n\t\tprivate menuId: MenuId | undefined,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@IChatVariablesService private readonly chatVariablesService: IChatVariablesService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): ICollapsibleListTemplate {\n\t\tconst templateDisposables = new DisposableStore();\n\t\tconst label = templateDisposables.add(this.labels.create(container, { supportHighlights: true, supportIcons: true }));\n\n\t\tlet toolbar;\n\t\tlet actionBarContainer;\n\t\tlet contextKeyService;\n\t\tif (this.menuId) {\n\t\t\tactionBarContainer = $('.chat-collapsible-list-action-bar');\n\t\t\tcontextKeyService = templateDisposables.add(this.contextKeyService.createScoped(actionBarContainer));\n\t\t\tconst scopedInstantiationService = templateDisposables.add(this.instantiationService.createChild(new ServiceCollection([IContextKeyService, contextKeyService])));\n\t\t\ttoolbar = templateDisposables.add(scopedInstantiationService.createInstance(MenuWorkbenchToolBar, actionBarContainer, this.menuId, { menuOptions: { shouldForwardArgs: true, arg: undefined } }));\n\t\t\tlabel.element.appendChild(actionBarContainer);\n\t\t}\n\n\t\treturn { templateDisposables, label, toolbar, actionBarContainer, contextKeyService };\n\t}\n\n\n\tprivate getReferenceIcon(data: IChatContentReference): URI | ThemeIcon | undefined {\n\t\tif (ThemeIcon.isThemeIcon(data.iconPath)) {\n\t\t\treturn data.iconPath;\n\t\t} else {\n\t\t\treturn this.themeService.getColorTheme().type === ColorScheme.DARK && data.iconPath?.dark\n\t\t\t\t? data.iconPath?.dark\n\t\t\t\t: data.iconPath?.light;\n\t\t}\n\t}\n\n\trenderElement(data: IChatCollapsibleListItem, index: number, templateData: ICollapsibleListTemplate, height: number | undefined): void {\n\t\tif (data.kind === 'warning') {\n\t\t\ttemplateData.label.setResource({ name: data.content.value }, { icon: Codicon.warning });\n\t\t\treturn;\n\t\t}\n\n\t\tconst reference = data.reference;\n\t\tconst icon = this.getReferenceIcon(data);\n\t\ttemplateData.label.element.style.display = 'flex';\n\t\tlet arg: URI | undefined;\n\t\tif (typeof reference === 'object' && 'variableName' in reference) {\n\t\t\tif (reference.value) {\n\t\t\t\tconst uri = URI.isUri(reference.value) ? reference.value : reference.value.uri;\n\t\t\t\ttemplateData.label.setResource(\n\t\t\t\t\t{\n\t\t\t\t\t\tresource: uri,\n\t\t\t\t\t\tname: basenameOrAuthority(uri),\n\t\t\t\t\t\tdescription: `#${reference.variableName}`,\n\t\t\t\t\t\trange: 'range' in reference.value ? reference.value.range : undefined,\n\t\t\t\t\t}, { icon, title: data.options?.status?.description ?? data.title });\n\t\t\t} else if (reference.variableName.startsWith('kernelVariable')) {\n\t\t\t\tconst variable = reference.variableName.split(':')[1];\n\t\t\t\tconst asVariableName = `${variable}`;\n\t\t\t\tconst label = `Kernel variable`;\n\t\t\t\ttemplateData.label.setLabel(label, asVariableName, { title: data.options?.status?.description });\n\t\t\t} else {\n\t\t\t\tconst variable = this.chatVariablesService.getVariable(reference.variableName);\n\t\t\t\t// This is a hack to get chat attachment ThemeIcons to render for resource labels\n\t\t\t\tconst asThemeIcon = variable?.icon ? `$(${variable.icon.id}) ` : '';\n\t\t\t\tconst asVariableName = `#${reference.variableName}`; // Fallback, shouldn't really happen\n\t\t\t\tconst label = `${asThemeIcon}${variable?.fullName ?? asVariableName}`;\n\t\t\t\ttemplateData.label.setLabel(label, asVariableName, { title: data.options?.status?.description ?? variable?.description });\n\t\t\t}\n\t\t} else if (typeof reference === 'string') {\n\t\t\ttemplateData.label.setLabel(reference, undefined, { iconPath: URI.isUri(icon) ? icon : undefined, title: data.options?.status?.description ?? data.title });\n\n\t\t} else {\n\t\t\tconst uri = 'uri' in reference ? reference.uri : reference;\n\t\t\targ = uri;\n\t\t\tif (uri.scheme === 'https' && isEqualAuthority(uri.authority, 'github.com') && uri.path.includes('/tree/')) {\n\t\t\t\t// Parse a nicer label for GitHub URIs that point at a particular commit + file\n\t\t\t\tconst label = uri.path.split('/').slice(1, 3).join('/');\n\t\t\t\tconst description = uri.path.split('/').slice(5).join('/');\n\t\t\t\ttemplateData.label.setResource({ resource: uri, name: label, description }, { icon: Codicon.github, title: data.title });\n\t\t\t} else if (uri.scheme === this.productService.urlProtocol && isEqualAuthority(uri.authority, SETTINGS_AUTHORITY)) {\n\t\t\t\t// a nicer label for settings URIs\n\t\t\t\tconst settingId = uri.path.substring(1);\n\t\t\t\ttemplateData.label.setResource({ resource: uri, name: settingId }, { icon: Codicon.settingsGear, title: localize('setting.hover', \"Open setting '{0}'\", settingId) });\n\t\t\t} else if (matchesSomeScheme(uri, Schemas.mailto, Schemas.http, Schemas.https)) {\n\t\t\t\ttemplateData.label.setResource({ resource: uri, name: uri.toString() }, { icon: icon ?? Codicon.globe, title: data.options?.status?.description ?? data.title ?? uri.toString() });\n\t\t\t} else {\n\t\t\t\ttemplateData.label.setFile(uri, {\n\t\t\t\t\tfileKind: FileKind.FILE,\n\t\t\t\t\t// Should not have this live-updating data on a historical reference\n\t\t\t\t\tfileDecorations: undefined,\n\t\t\t\t\trange: 'range' in reference ? reference.range : undefined,\n\t\t\t\t\ttitle: data.options?.status?.description ?? data.title\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfor (const selector of ['.monaco-icon-suffix-container', '.monaco-icon-name-container']) {\n\t\t\tconst element = templateData.label.element.querySelector(selector);\n\t\t\tif (element) {\n\t\t\t\tif (data.options?.status?.kind === ChatResponseReferencePartStatusKind.Omitted || data.options?.status?.kind === ChatResponseReferencePartStatusKind.Partial) {\n\t\t\t\t\telement.classList.add('warning');\n\t\t\t\t} else {\n\t\t\t\t\telement.classList.remove('warning');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (data.state !== undefined) {\n\t\t\tif (templateData.actionBarContainer) {\n\t\t\t\tif (data.state === WorkingSetEntryState.Modified && !templateData.actionBarContainer.classList.contains('modified')) {\n\t\t\t\t\ttemplateData.actionBarContainer.classList.add('modified');\n\t\t\t\t\ttemplateData.label.element.querySelector('.monaco-icon-name-container')?.classList.add('modified');\n\t\t\t\t} else if (data.state !== WorkingSetEntryState.Modified) {\n\t\t\t\t\ttemplateData.actionBarContainer.classList.remove('modified');\n\t\t\t\t\ttemplateData.label.element.querySelector('.monaco-icon-name-container')?.classList.remove('modified');\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (templateData.toolbar) {\n\t\t\t\ttemplateData.toolbar.context = arg;\n\t\t\t}\n\t\t\tif (templateData.contextKeyService && data.state !== undefined) {\n\t\t\t\tchatEditingWidgetFileStateContextKey.bindTo(templateData.contextKeyService).set(data.state);\n\t\t\t}\n\t\t}\n\t}\n\n\tdisposeTemplate(templateData: ICollapsibleListTemplate): void {\n\t\ttemplateData.templateDisposables.dispose();\n\t}\n}\n\nfunction getResourceForElement(element: IChatCollapsibleListItem): URI | null {\n\tif (element.kind === 'warning') {\n\t\treturn null;\n\t}\n\tconst { reference } = element;\n\tif (typeof reference === 'string' || 'variableName' in reference) {\n\t\treturn null;\n\t} else if (URI.isUri(reference)) {\n\t\treturn reference;\n\t} else {\n\t\treturn reference.uri;\n\t}\n}\n\n//#region Resource context menu\n\nregisterAction2(class AddToChatAction extends Action2 {\n\n\tstatic readonly id = 'workbench.action.chat.addToChatAction';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: AddToChatAction.id,\n\t\t\ttitle: {\n\t\t\t\t...localize2('addToChat', \"Add File to Chat\"),\n\t\t\t},\n\t\t\tf1: false,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ChatAttachmentsContext,\n\t\t\t\tgroup: 'chat',\n\t\t\t\torder: 1,\n\t\t\t\twhen: ExplorerFolderContext.negate(),\n\t\t\t}]\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, resource: URI): Promise<void> {\n\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\t\tconst variablesService = accessor.get(IChatVariablesService);\n\n\t\tif (!resource) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst widget = chatWidgetService.lastFocusedWidget;\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\n\t\tvariablesService.attachContext('file', resource, widget.location);\n\t}\n});\n\n//#endregion\n"],
  "mappings": "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",
  "names": ["element"]
}
