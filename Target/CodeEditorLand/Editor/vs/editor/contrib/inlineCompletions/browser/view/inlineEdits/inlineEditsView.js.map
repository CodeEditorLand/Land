{
  "version": 3,
  "sources": ["../../../../../../../../../../Dependency/Land/Dependency/Editor/Source/vs/editor/contrib/inlineCompletions/browser/view/inlineEdits/inlineEditsView.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { h } from '../../../../../../base/browser/dom.js';\nimport { renderIcon } from '../../../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { numberComparator } from '../../../../../../base/common/arrays.js';\nimport { findFirstMin } from '../../../../../../base/common/arraysFind.js';\nimport { Codicon } from '../../../../../../base/common/codicons.js';\nimport { createHotClass } from '../../../../../../base/common/hotReloadHelpers.js';\nimport { Disposable } from '../../../../../../base/common/lifecycle.js';\nimport { autorun, constObservable, derived, derivedDisposable, derivedWithCancellationToken, IObservable, observableFromEvent, ObservablePromise } from '../../../../../../base/common/observable.js';\nimport { getIndentationLength, splitLines } from '../../../../../../base/common/strings.js';\nimport { MenuWorkbenchToolBar } from '../../../../../../platform/actions/browser/toolbar.js';\nimport { MenuId, MenuItemAction } from '../../../../../../platform/actions/common/actions.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { ICodeEditor } from '../../../../../browser/editorBrowser.js';\nimport { observableCodeEditor } from '../../../../../browser/observableCodeEditor.js';\nimport { EmbeddedCodeEditorWidget } from '../../../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { IDiffProviderFactoryService } from '../../../../../browser/widget/diffEditor/diffProviderFactoryService.js';\nimport { diffAddDecoration, diffAddDecorationEmpty, diffDeleteDecorationEmpty, diffWholeLineAddDecoration, diffWholeLineDeleteDecoration } from '../../../../../browser/widget/diffEditor/registrations.contribution.js';\nimport { appendRemoveOnDispose, applyStyle } from '../../../../../browser/widget/diffEditor/utils.js';\nimport { EditorOption } from '../../../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../../../common/core/lineRange.js';\nimport { OffsetRange } from '../../../../../common/core/offsetRange.js';\nimport { Position } from '../../../../../common/core/position.js';\nimport { Range } from '../../../../../common/core/range.js';\nimport { ArrayText, SingleTextEdit, TextEdit } from '../../../../../common/core/textEdit.js';\nimport { TextLength } from '../../../../../common/core/textLength.js';\nimport { lineRangeMappingFromRangeMappings, RangeMapping } from '../../../../../common/diff/rangeMapping.js';\nimport { IModelDeltaDecoration } from '../../../../../common/model.js';\nimport { TextModel } from '../../../../../common/model/textModel.js';\nimport { TextModelText } from '../../../../../common/model/textModelText.js';\nimport { IModelService } from '../../../../../common/services/model.js';\nimport { InlineEdit } from '../../model/inlineEdit.js';\nimport './inlineEditsView.css';\nimport { applyEditToModifiedRangeMappings, maxLeftInRange, Point, StatusBarViewItem, UniqueUriGenerator } from './utils.js';\n\nexport class InlineEditsViewAndDiffProducer extends Disposable {\n\tpublic static readonly hot = createHotClass(InlineEditsViewAndDiffProducer);\n\n\tprivate readonly _modelUriGenerator = new UniqueUriGenerator('inline-edits');\n\n\tprivate readonly _originalModel = derivedDisposable(() => this._modelService.createModel(\n\t\t'', null, this._modelUriGenerator.getUniqueUri())).keepObserved(this._store);\n\tprivate readonly _modifiedModel = derivedDisposable(() => this._modelService.createModel(\n\t\t'', null, this._modelUriGenerator.getUniqueUri())).keepObserved(this._store);\n\n\tprivate readonly _inlineEditPromise = derivedWithCancellationToken<ObservablePromise<InlineEditWithChanges | undefined> | undefined>(this, (reader, token) => {\n\t\tconst edit = this._edit.read(reader);\n\t\tif (!edit) { return undefined; }\n\t\tconst range = edit.range;\n\t\tif (edit.text.trim() === '') {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis._originalModel.get().setValue(this._editor.getModel()!.getValueInRange(range));\n\t\tthis._modifiedModel.get().setValue(edit.text);\n\n\t\tconst d = this._diffProviderFactoryService.createDiffProvider({ diffAlgorithm: 'advanced' });\n\t\treturn ObservablePromise.fromFn(async () => {\n\t\t\tconst result = await d.computeDiff(this._originalModel.get(), this._modifiedModel.get(), {\n\t\t\t\tcomputeMoves: false,\n\t\t\t\tignoreTrimWhitespace: false,\n\t\t\t\tmaxComputationTimeMs: 1000,\n\t\t\t}, token);\n\n\t\t\tif (result.identical) { return undefined; }\n\n\t\t\tconst rangeStartPos = Range.lift(edit.range).getStartPosition();\n\t\t\tconst innerChanges = result.changes.flatMap(c => c.innerChanges!);\n\n\t\t\tfunction addRangeToPos(pos: Position, range: Range): Range {\n\t\t\t\tconst start = TextLength.fromPosition(range.getStartPosition());\n\t\t\t\treturn TextLength.ofRange(range).createRange(start.addToPosition(pos));\n\t\t\t}\n\n\t\t\tconst edits = innerChanges.map(c => new SingleTextEdit(addRangeToPos(rangeStartPos, c.originalRange), this._modifiedModel.get()!.getValueInRange(c.modifiedRange)));\n\n\t\t\t/*if (edit.range.startColumn !== 1) {\n\t\t\t\tconst range = edit.range;\n\t\t\t\tconst textBefore = this._editor.getModel()!.getValueInRange(new Range(range.startLineNumber, 1, range.startLineNumber, range.startColumn));\n\t\t\t\tconst skippedTextEdit = TextEdit.insert(new Position(1, 1), textBefore);\n\t\t\t\tinnerChanges = applyEditToOriginalRangeMappings(innerChanges, skippedTextEdit);\n\t\t\t}*/\n\n\t\t\treturn new InlineEditWithChanges(new TextEdit(edits));\n\t\t});\n\t});\n\n\tprivate readonly _inlineEdit = this._inlineEditPromise.map((p, reader) => p?.promiseResult?.read(reader)?.data);\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\tprivate readonly _edit: IObservable<InlineEdit | undefined>,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IDiffProviderFactoryService private readonly _diffProviderFactoryService: IDiffProviderFactoryService,\n\t\t@IModelService private readonly _modelService: IModelService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(new InlineEditsView(this._editor, this._inlineEdit, this._instantiationService));\n\t}\n}\n\nexport class InlineEditWithChanges {\n\tpublic readonly originalLineRange = LineRange.fromRangeInclusive(RangeMapping.fromEditJoin(this.diffedTextEdit).originalRange);\n\tpublic readonly modifiedLineRange = LineRange.fromRangeInclusive(RangeMapping.fromEditJoin(this.diffedTextEdit).modifiedRange);\n\n\tconstructor(\n\t\tpublic readonly diffedTextEdit: TextEdit,\n\t) {\n\t}\n}\n\nexport class InlineEditsView extends Disposable {\n\tprivate readonly _editorObs = observableCodeEditor(this._editor);\n\n\tprivate readonly _elements = h('div.inline-edits-view', {\n\t\tstyle: {\n\t\t\tposition: 'absolute',\n\t\t\toverflow: 'visible',\n\t\t\ttop: '0px',\n\t\t\tleft: '0px',\n\t\t},\n\t}, [\n\t\th('div.editorContainer@editorContainer', { style: { position: 'absolute' } }, [\n\t\t\th('div.preview@editor', { style: {} }),\n\t\t\th('div.toolbar@toolbar', { style: {} }),\n\t\t]),\n\t]);\n\n\tprivate readonly _indicator = h('div.inline-edits-view-indicator', {\n\t\tstyle: {\n\t\t\tposition: 'absolute',\n\t\t\toverflow: 'visible',\n\t\t},\n\t}, [\n\t\th('div.icon', {}, [\n\t\t\trenderIcon(Codicon.arrowLeft),\n\t\t]),\n\t\th('div.label', {}, [\n\t\t\t' inline edit'\n\t\t])\n\t]);\n\n\tprivate readonly _previewEditorWidth = derived(this, reader => {\n\t\tconst edit = this._edit.read(reader);\n\t\tif (!edit) { return 0; }\n\n\t\treturn maxLeftInRange(this._previewEditorObs, edit.modifiedLineRange, reader);\n\t});\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\tprivate readonly _edit: IObservable<InlineEditWithChanges | undefined>,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\t\tconst visible = derived(this, reader => this._edit.read(reader) !== undefined);\n\t\tthis._register(applyStyle(this._elements.root, {\n\t\t\tdisplay: derived(this, reader => visible.read(reader) ? 'block' : 'none')\n\t\t}));\n\n\t\tthis._register(appendRemoveOnDispose(this._editor.getDomNode()!, this._elements.root));\n\n\t\tthis._register(observableCodeEditor(_editor).createOverlayWidget({\n\t\t\tdomNode: this._elements.root,\n\t\t\tposition: constObservable(null),\n\t\t\tallowEditorOverflow: false,\n\t\t\tminContentWidthInPx: derived(reader => {\n\t\t\t\tconst x = this._layout1.read(reader)?.left;\n\t\t\t\tif (x === undefined) { return 0; }\n\t\t\t\tconst width = this._previewEditorWidth.read(reader);\n\t\t\t\treturn x + width;\n\t\t\t}),\n\t\t}));\n\n\t\tthis._register(observableCodeEditor(_editor).createOverlayWidget({\n\t\t\tdomNode: this._indicator.root,\n\t\t\tposition: constObservable(null),\n\t\t\tallowEditorOverflow: false,\n\t\t\tminContentWidthInPx: constObservable(0),\n\t\t}));\n\n\t\tthis._previewEditor.setModel(this._previewTextModel);\n\n\t\tthis._register(this._previewEditorObs.setDecorations(this._decorations.map(d => d?.modifiedDecorations ?? [])));\n\n\t\tthis._register(observableCodeEditor(_editor).setDecorations(this._decorations.map(d => d?.originalDecorations ?? [])));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tconst layoutInfo = this._layout.read(reader);\n\t\t\tif (!layoutInfo) {\n\t\t\t\tthis._indicator.root.style.visibility = 'hidden';\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._indicator.root.style.visibility = '';\n\n\t\t\tconst { topEdit, editHeight } = layoutInfo;\n\n\t\t\tthis._elements.editorContainer.style.top = `${topEdit.y}px`;\n\t\t\tthis._elements.editorContainer.style.left = `${topEdit.x}px`;\n\n\t\t\tconst width = this._previewEditorWidth.read(reader);\n\t\t\tthis._previewEditor.layout({ height: editHeight, width });\n\n\t\t\tconst i = this._editorObs.layoutInfo.read(reader);\n\n\n\t\t\tconst range = new OffsetRange(0, i.height - 30);\n\n\t\t\tthis._indicator.root.classList.toggle('top', topEdit.y < range.start);\n\t\t\tthis._indicator.root.classList.toggle('bottom', topEdit.y > range.endExclusive);\n\t\t\tthis._indicator.root.classList.toggle('contained', range.contains(topEdit.y));\n\n\n\t\t\tthis._indicator.root.style.top = `${range.clip(topEdit.y)}px`;\n\t\t\tthis._indicator.root.style.right = `${i.minimap.minimapWidth + i.verticalScrollbarWidth}px`;\n\t\t}));\n\n\t\tconst toolbarDropdownVisible = observableFromEvent(this, this._toolbar.onDidChangeDropdownVisibility, (e) => e ?? false);\n\n\t\tthis._register(autorun(reader => {\n\t\t\tthis._elements.root.classList.toggle('toolbarDropdownVisible', toolbarDropdownVisible.read(reader));\n\t\t}));\n\t}\n\n\tprivate readonly _uiState = derived(this, reader => {\n\t\tconst edit = this._edit.read(reader);\n\t\tif (!edit) { return undefined; }\n\n\t\tlet newText = edit.diffedTextEdit.apply(new TextModelText(this._editor.getModel()!));\n\n\t\tlet mappings = RangeMapping.fromEdit(edit.diffedTextEdit);\n\n\t\tconst newLines = splitLines(newText);\n\n\t\tfunction offsetRangeToRange(offsetRange: OffsetRange, startPos: Position): Range {\n\t\t\treturn new Range(\n\t\t\t\tstartPos.lineNumber,\n\t\t\t\tstartPos.column + offsetRange.start,\n\t\t\t\tstartPos.lineNumber,\n\t\t\t\tstartPos.column + offsetRange.endExclusive,\n\t\t\t);\n\t\t}\n\n\t\tconst edits: SingleTextEdit[] = [];\n\t\tconst minIndent = findFirstMin(edit.modifiedLineRange.mapToLineArray(l => getIndentationLength(newLines[l - 1])), numberComparator)!;\n\t\tedit.modifiedLineRange.forEach(lineNumber => {\n\t\t\tedits.push(new SingleTextEdit(offsetRangeToRange(new OffsetRange(0, minIndent), new Position(lineNumber, 1)), ''));\n\t\t});\n\t\tconst indentationAdjustmentEdit = new TextEdit(edits);\n\n\t\tnewText = indentationAdjustmentEdit.applyToString(newText);\n\t\tmappings = applyEditToModifiedRangeMappings(mappings, indentationAdjustmentEdit);\n\n\t\tconst diff = lineRangeMappingFromRangeMappings(mappings, new TextModelText(this._editor.getModel()!), new ArrayText(newLines));\n\n\t\treturn {\n\t\t\tdiff,\n\t\t\tedit,\n\t\t\tnewText,\n\t\t\tnewTextLineCount: edit.modifiedLineRange.length,\n\t\t};\n\t});\n\n\tprotected readonly _toolbar = this._register(this._instantiationService.createInstance(MenuWorkbenchToolBar, this._elements.toolbar, MenuId.InlineEditsActions, {\n\t\tmenuOptions: { renderShortTitle: true },\n\t\ttoolbarOptions: {\n\t\t\tprimaryGroup: g => g.startsWith('primary'),\n\t\t},\n\t\tactionViewItemProvider: (action, options) => {\n\t\t\tif (action instanceof MenuItemAction) {\n\t\t\t\treturn this._instantiationService.createInstance(StatusBarViewItem, action, undefined);\n\t\t\t}\n\t\t\treturn undefined;\n\t\t},\n\t}));\n\tprivate readonly _previewTextModel = this._register(this._instantiationService.createInstance(\n\t\tTextModel,\n\t\t'',\n\t\tthis._editor.getModel()!.getLanguageId(),\n\t\t{ ...TextModel.DEFAULT_CREATION_OPTIONS, bracketPairColorizationOptions: { enabled: true, independentColorPoolPerBracketType: false } },\n\t\tnull\n\t));\n\n\tprivate readonly _previewEditor = this._register(this._instantiationService.createInstance(\n\t\tEmbeddedCodeEditorWidget,\n\t\tthis._elements.editor,\n\t\t{\n\t\t\tglyphMargin: false,\n\t\t\tlineNumbers: 'off',\n\t\t\tminimap: { enabled: false },\n\t\t\tguides: {\n\t\t\t\tindentation: false,\n\t\t\t\tbracketPairs: false,\n\t\t\t\tbracketPairsHorizontal: false,\n\t\t\t\thighlightActiveIndentation: false,\n\t\t\t},\n\t\t\tfolding: false,\n\t\t\tselectOnLineNumbers: false,\n\t\t\tselectionHighlight: false,\n\t\t\tcolumnSelection: false,\n\t\t\toverviewRulerBorder: false,\n\t\t\toverviewRulerLanes: 0,\n\t\t\tlineDecorationsWidth: 0,\n\t\t\tlineNumbersMinChars: 0,\n\t\t\tbracketPairColorization: { enabled: true, independentColorPoolPerBracketType: false },\n\t\t\tscrollBeyondLastLine: false,\n\t\t\tscrollbar: {\n\t\t\t\tvertical: 'hidden',\n\t\t\t\thorizontal: 'hidden',\n\t\t\t},\n\t\t\treadOnly: true,\n\t\t\twordWrap: 'off',\n\t\t},\n\t\t{ contributions: [], },\n\t\tthis._editor\n\t));\n\n\tprivate readonly _previewEditorObs = observableCodeEditor(this._previewEditor);\n\n\tprivate readonly _ensureModelTextIsSet = derived(reader => {\n\t\tconst uiState = this._uiState.read(reader);\n\t\tif (!uiState) { return; }\n\n\t\tthis._previewTextModel.setValue(uiState.newText);\n\t\tconst range = uiState.edit.originalLineRange;\n\n\t\tthis._previewEditor.setHiddenAreas([\n\t\t\tnew Range(1, 1, range.startLineNumber - 1, 1),\n\t\t\tnew Range(range.startLineNumber + uiState.newTextLineCount, 1, this._previewTextModel.getLineCount() + 1, 1),\n\t\t], undefined, true);\n\n\t}).recomputeInitiallyAndOnChange(this._store);\n\n\tprivate readonly _decorations = derived(this, (reader) => {\n\t\tthis._ensureModelTextIsSet.read(reader);\n\t\tconst s = this._uiState.read(reader);\n\t\tif (!s) { return undefined; }\n\t\tconst diff = s.diff;\n\t\tconst originalDecorations: IModelDeltaDecoration[] = [];\n\t\tconst modifiedDecorations: IModelDeltaDecoration[] = [];\n\n\t\tfor (const m of diff) {\n\t\t\tif (m.modified.isEmpty || m.original.isEmpty) {\n\t\t\t\tif (!m.original.isEmpty) {\n\t\t\t\t\toriginalDecorations.push({ range: m.original.toInclusiveRange()!, options: diffWholeLineDeleteDecoration });\n\t\t\t\t}\n\t\t\t\tif (!m.modified.isEmpty) {\n\t\t\t\t\tmodifiedDecorations.push({ range: m.modified.toInclusiveRange()!, options: diffWholeLineAddDecoration });\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (const i of m.innerChanges || []) {\n\t\t\t\t\t// Don't show empty markers outside the line range\n\t\t\t\t\tif (m.original.contains(i.originalRange.startLineNumber)) {\n\t\t\t\t\t\toriginalDecorations.push({\n\t\t\t\t\t\t\trange: i.originalRange, options: i.originalRange.isEmpty() ? diffDeleteDecorationEmpty : {\n\t\t\t\t\t\t\t\tclassName: 'char-delete',\n\t\t\t\t\t\t\t\tdescription: 'char-delete',\n\t\t\t\t\t\t\t\tshouldFillLineOnLineBreak: false,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (m.modified.contains(i.modifiedRange.startLineNumber)) {\n\t\t\t\t\t\tmodifiedDecorations.push({ range: i.modifiedRange, options: i.modifiedRange.isEmpty() ? diffAddDecorationEmpty : diffAddDecoration });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn { originalDecorations, modifiedDecorations };\n\t});\n\n\tprivate readonly _layout1 = derived(this, reader => {\n\t\tconst inlineEdit = this._edit.read(reader);\n\t\tif (!inlineEdit) { return null; }\n\n\t\tconst maxLeft = maxLeftInRange(this._editorObs, inlineEdit.originalLineRange, reader);\n\n\t\tconst contentLeft = this._editorObs.layoutInfoContentLeft.read(reader);\n\t\treturn { left: contentLeft + maxLeft };\n\t});\n\n\tprivate readonly _layout = derived(this, (reader) => {\n\t\tconst inlineEdit = this._edit.read(reader);\n\t\tif (!inlineEdit) { return null; }\n\n\t\tconst range = inlineEdit.originalLineRange;\n\n\t\tconst scrollLeft = this._editorObs.scrollLeft.read(reader);\n\n\t\tconst left = this._layout1.read(reader)!.left + 20 - scrollLeft;\n\n\t\tconst selectionTop = this._editor.getTopForLineNumber(range.startLineNumber) - this._editorObs.scrollTop.read(reader);\n\t\tconst selectionBottom = this._editor.getTopForLineNumber(range.endLineNumberExclusive) - this._editorObs.scrollTop.read(reader);\n\n\t\tconst topCode = new Point(left, selectionTop);\n\t\tconst bottomCode = new Point(left, selectionBottom);\n\t\tconst codeHeight = selectionBottom - selectionTop;\n\n\t\tconst codeEditDist = 50;\n\t\tconst editHeight = this._editor.getOption(EditorOption.lineHeight) * inlineEdit.modifiedLineRange.length;\n\n\t\tconst topEdit = new Point(left + codeEditDist, selectionTop);\n\t\tconst bottomEdit = new Point(left + codeEditDist, selectionBottom);\n\n\t\treturn {\n\t\t\ttopCode,\n\t\t\tbottomCode,\n\t\t\tcodeHeight,\n\t\t\ttopEdit,\n\t\t\tbottomEdit,\n\t\t\teditHeight,\n\t\t};\n\t});\n}\n"],
  "mappings": "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",
  "names": ["range"]
}
